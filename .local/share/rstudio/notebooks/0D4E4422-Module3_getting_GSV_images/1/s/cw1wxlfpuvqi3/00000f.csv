"0","# -----------------------------------------------------------"
"0","# First intersection"
"0","# First two points from a line"
"0","start_p <- e %>% "
"0","  st_coordinates() %>% "
"0","  .[1:2,1:2]"
"0",""
"0","# Calculate the azimuth of the line connecting the two points"
"0","start_azi <- atan2(start_p[2,""X""] - start_p[1, ""X""],"
"0","                   start_p[2,""Y""] - start_p[1, ""Y""])*180/pi # 180/pi because trigonometry in R takes radians"
"0",""
"0","# -----------------------------------------------------------"
"0","# The other intersection"
"0","# Last two points from a line"
"0","end_p <- e %>% "
"0","  st_coordinates() %>% "
"0","  .[(nrow(.)-1):nrow(.),1:2]"
"0",""
"0","# Calculate the azimuth of the line connecting the two points"
"0","end_azi <- atan2(end_p[2,""X""] - end_p[1, ""X""],"
"0","                 end_p[2,""Y""] - end_p[1, ""Y""])*180/pi"
"0",""
"0","# Flip the azimuth so that the camera would be looking back"
"0","end_azi <- if (end_azi < 180) {end_azi + 180} else {end_azi - 180}"
"0",""
"0","# ----------------------------------------------------------"
"0","# mid point"
"0","mid_p <- e %>% "
"0","  st_geometry() %>% "
"0","  .[[1]] %>% "
"0","  st_line_sample(sample = c(0.45, 0.55)) %>% "
"0","  st_cast(""POINT"") %>% "
"0","  st_coordinates()"
"0",""
"0","mid_azi <- atan2(mid_p[2,""X""] - mid_p[1, ""X""],"
"0","                 mid_p[2,""Y""] - mid_p[1, ""Y""])*180/pi"
"0",""
"0","mid_p <- e %>% "
"0","  st_geometry() %>% "
"0","  .[[1]] %>% "
"0","  st_line_sample(sample = 0.5) %>% "
"0","  st_coordinates() %>% "
"0","  .[1,1:2]"
