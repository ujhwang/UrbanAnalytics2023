"0","get_azi <- function(line){"
"0","  # end point 1 ----------------------------------------------"
"0","  start_p <- line %>% "
"0","  st_coordinates() %>% "
"0","  .[1:2,1:2]"
"0",""
"0","  start_azi <- atan2(start_p[2,""X""] - start_p[1, ""X""],"
"0","                     start_p[2,""Y""] - start_p[1, ""Y""])*180/pi"
"0","  "
"0","  # end point 2 ----------------------------------------------"
"0","  end_p <- line %>% "
"0","    st_coordinates() %>% "
"0","    .[(nrow(.)-1):nrow(.),1:2]"
"0","  "
"0","  end_azi <- atan2(end_p[2,""X""] - end_p[1, ""X""],"
"0","                   end_p[2,""Y""] - end_p[1, ""Y""])*180/pi"
"0","  "
"0","  end_azi <- if (end_azi < 180) {end_azi + 180} else {end_azi - 180}"
"0","  "
"0","  # mid point 1 ---------------------------------------------"
"0","  mid_p <- line %>% "
"0","    st_line_sample(sample = c(0.45, 0.55)) %>% "
"0","    st_cast(""POINT"") %>% "
"0","    st_coordinates()"
"0","  "
"0","  mid_azi <- atan2(mid_p[2,""X""] - mid_p[1, ""X""],"
"0","                   mid_p[2,""Y""] - mid_p[1, ""Y""])*180/pi"
"0","  "
"0","  mid_p <- line %>% "
"0","    st_line_sample(sample = 0.5) %>% "
"0","    st_coordinates() %>% "
"0","    .[1,1:2]"
"0","    "
"0","  "
"0","  # return in data frame ------------------------------------"
"0","  return(tribble("
"0","    ~type,    ~X,            ~Y,             ~azi,"
"0","    ""start"",   start_p[1,""X""], start_p[1,""Y""], start_azi,"
"0","    ""mid1"",    mid_p[""X""],   mid_p[""Y""],   mid_azi,"
"0","    ""mid2"",    mid_p[""X""],   mid_p[""Y""],   ifelse(mid_azi < 180, mid_azi + 180, mid_azi - 180),"
"0","    ""end"",     end_p[2,""X""],   end_p[2,""Y""],   end_azi))"
"0","}"
